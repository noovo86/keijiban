<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8" />
    <title>クソみたいな掲示板</title>
    <!--<link rel="icon" type="image/jpeg" href="./icon.png">-->
    <!--<link rel="apple-touch-icon" sizes="180x180" href="./icon.png">-->
    <meta name="viewport" content="user-scalable=no">
    <style>
        body {
            display: block;
            position: fixed;
            margin: 0;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100%;
            background-color: #525252;
        }
        
        p {
            margin: 0;
        }
        
         ::-webkit-scrollbar {
            width: 10px;
        }
        
         ::-webkit-scrollbar-thumb {
            background-color: #787680;
            border-radius: 1000px;
        }
        
         ::-webkit-scrollbar-track {
            border-radius: 1000px;
            box-shadow: inset 0 0 5px #c0c0c0;
        }
        
        .outer {
            position: relative;
            margin-left: auto;
            margin-right: auto;
            width: 1000px;
            max-width: 90%;
            height: 90vh;
            max-height: 90%;
            margin-top: 5vh;
            border-radius: 30px;
            background-color: #ffffff;
        }
        
        .inner {
            position: relative;
            margin: 3%;
            top: 3%;
            height: 87%;
            overflow-y: auto;
        }
        
        .post {
            position: relative;
            width: 94%;
            margin: 0;
            margin-bottom: 2%;
            border-radius: 15px;
            padding: 3%;
            padding-top: 1%;
            padding-bottom: 1%;
            background-color: #b8ffa9;
        }
        
        .name {
            position: relative;
            width: 80%;
            font-size: 2vh;
        }
        
        .body {
            position: relative;
            width: 80%;
            font-size: 2vh;
        }
        
        .time {
            position: absolute;
            right: 3%;
            top: 5%;
            font-size: 1.5vh;
        }
        
        .new {
            position: absolute;
            bottom: 0;
            margin: 3%;
            height: 5%;
            width: 94%;
        }
        
        #name {
            position: relative;
            height: 100%;
            width: 20%;
            margin-right: 5%;
            text-align: center;
            font-size: 2vh;
            border-radius: 1000px;
            border: solid 1px #b8b8b8;
        }
        
        #message {
            position: relative;
            height: 100%;
            width: 50%;
            margin-right: 5%;
            text-align: center;
            font-size: 2vh;
            border-radius: 1000px;
            border: solid 1px #b8b8b8;
        }
        
        #send {
            position: relative;
            height: 100%;
            width: 17%;
            text-align: center;
            font-size: 2vh;
            border-radius: 1000px;
            border: solid 1px #b8b8b8;
        }
    </style>
</head>
<!--<body>-->

<body>
    <div class="outer">
        <div class="inner">
            <div id="posts">
                <div class="post">
                    <p class="name">--運営--</p>
                    <p class="time">2021/2/27</p>
                    <p class="body">※犯罪行為などの書き込みがあった場合、削除する場合があります。控えて下さい。</p>
                </div>
                <div class="post">
                    <p class="name">--運営--</p>
                    <p class="time">2021/2/27</p>
                    <p class="body">ここは自由な掲示板です。愚痴、自慢、謎報告、出会い、、。何を書き込んでいただいても構いません。好きに使って下さい。</p>
                </div>
            </div>
        </div>
        <form action="javascript: sendmes()" class="new">
            <input id="name" placeholder="名前" />
            <input id="message" placeholder="投稿内容" />
            <button id="send" onclick="sendmes()">投稿</button>
        </form>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
    <script>
        // データベースの参照を準備
        var firebaseRef = new Firebase(""); // ... 1
        var messagesRef = firebaseRef.child('keijiban'); // ... 2

        // 既存メッセージを表示
        messagesRef.on('child_added', function(snapshot) {
            var msg = snapshot.val();
            var hyouji = "";
            var na = "匿名";
            if (msg.name == "") {
                na = "匿名"
            } else {
                na = msg.name
            }
            hyouji = "<div class='post'><p class='name'>" + na + "</p><p class='time'>" + msg.time + "</p><p class='body'>>" + msg.body + "</p></div>"
            $("#posts").prepend(hyouji);
        });

        function sendmes() {
            // 新規メッセージを投稿

            var DD = new Date();
            var Year = DD.getFullYear()
            var Month = DD.getMonth() + 1;
            var Day = DD.getDate();
            var Hours = DD.getHours();
            var Minutes = DD.getMinutes();
            if ((Minutes - Minutes % 10) / 10 < 1) {
                Minutes = "0" + String(Minutes);
            }
            if ($('#message').val() != "") {
                messagesRef.push({ // ... 4
                    name: $('#name').val(),
                    body: $('#message').val(),
                    time: Year + "/" + Month + "/" + Day + " " + Hours + ":" + Minutes
                });
            }
            document.getElementById("message").value = "";
        };
    </script>
</body>

</html>